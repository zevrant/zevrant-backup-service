spring:
  webflux:
    base-path: /${spring.application.name}
  main:
    allow-bean-definition-overriding: true
  profiles:
    active: local
    include: liquibase
  datasource:
    url: jdbc:postgresql://localhost:5428/backup?createDatabaseIfNotExist=true
    username: sa
    password: example
    hikari:
      connection-timeout: 999999999
  jpa:
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  application:
    name: zevrant-backup-service
  liquibase:
    enabled: true
    change-log: classpath:db/changelog/db.changelog-master.yaml
  aop:
    proxy-target-class: true
  security:
    oauth2:
      client:
        provider:
          keycloak:
            issuer-uri: https://localhost:9011/auth/realms/zevrant-services
        registration:
          keycloak:
            client-id: ${zevrant.services.oauth.clientId}
            client-scret: ${zevrant.services.oauth.clientSecret}
      resourceserver:
        jwt:
          issuer-uri: ${spring.security.oauth2.client.provider.keycloak.issuer-uri}

server:
  port: 9009
  servlet:
    context-path: /${spring.application.name}
  ssl:
    key-store: /storage/keys/zevrant-services.p12
    key-store-type: PKCS12
    key-store-password: ${password}
oauth2:
  keystore:
    alias: 1

zevrant:
  backup:
    io:
      maxWaitTime: 5
    directory: /storage/backups/userdata
  unsecured:
    endpoints: /actuator/health,/actuator/info/,/actuator/prometheus
  services:
    oauth:
      clientId: ${backup.oauth.clientId}
      clientSecret: ${backup.oauth.clientSecret}
    oauth2:
      baseUrl: https://localhost:9001/
    clamAv:
      location: localhost
      port: 3310
      timeout: 99999999
  encrypted:
    properties: backup/oauth/clientId,backup/oauth/clientSecret,rds/backup/password

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  health:
    ldap:
      enabled: false

context:
  initializer:
    classes: com.zevrant.services.zevrantsecuritycommon.services.EncryptedPropertyContextInitializer

logging:
  level:
    com.zevrant.services: info
    root: info
